(this["webpackJsonpimage-bucket"]=this["webpackJsonpimage-bucket"]||[]).push([[0],{21:function(e,t,c){},22:function(e,t,c){},26:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c.n(n),r=c(15),s=c.n(r),i=(c(21),c(7)),u=(c(22),c(13)),l=c(10);c(27),c(28);l.a.initializeApp({apiKey:"AIzaSyAgqV-z4Qbl2nKcKrynAzGymaNkv5HqoMI",authDomain:"image-bucket-e6ccf.firebaseapp.com",projectId:"image-bucket-e6ccf",storageBucket:"image-bucket-e6ccf.appspot.com",messagingSenderId:"855095723612",appId:"1:855095723612:web:c69e113fd6300f8c5fc899",measurementId:"G-6VC2485NP0"});var o=l.a.storage(),j=l.a.firestore(),d=l.a.firestore.FieldValue.serverTimestamp,b=function(e){var t=Object(n.useState)([]),c=Object(i.a)(t,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){var t=j.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{docs:a}},f=c(2),p=function(e){var t=e.setSelectedImg,c=b("images").docs;return Object(f.jsx)("div",{className:"img-grid",children:c&&c.map((function(e){return Object(f.jsx)("div",{className:"img-wrap",onClick:function(){return t(e.url)},children:Object(f.jsx)("img",{src:e.url,alt:"uploaded pic"})},e.id)}))})},m=function e(){return Object(f.jsxs)("div",{className:e,children:[Object(f.jsx)("h1",{children:"Image Bucket"}),Object(f.jsx)("h2",{children:"Upload your pictures in the bucket"})]})},O=c(12),g=c.n(O),h=c(16),v=function(e){var t=Object(n.useState)(0),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(null),u=Object(i.a)(s,2),l=u[0],b=u[1],f=Object(n.useState)(null),p=Object(i.a)(f,2),m=p[0],O=p[1];return Object(n.useEffect)((function(){var t=o.ref(e.name),c=j.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;r(t)}),(function(e){b(e)}),Object(h.a)(g.a.mark((function e(){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,a=d(),c.add({url:n,createdAt:a}),O(n);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:a,url:m,error:l}},x=function(e){var t=e.file,c=e.setFile,a=v(t),r=a.url,s=a.progress;return Object(n.useEffect)((function(){r&&c(null)}),[r,c]),Object(f.jsx)("div",{className:"progress-bar",style:{width:s+"%"}})},k=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(null),s=Object(i.a)(r,2),u=s[0],l=s[1],o=["image/png","image/jpeg"];return Object(f.jsxs)("form",{children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&o.includes(t.type)?(a(t),l("")):(a(null),l("Please select an image file of type png or jpeg/jpg"))}}),Object(f.jsx)("span",{children:"click to upload"})]}),Object(f.jsxs)("div",{className:"output",children:[u&&Object(f.jsx)("div",{className:"error",children:u}),c&&Object(f.jsxs)("div",{children:[" ",c.name]}),c&&Object(f.jsx)(x,{file:c,setFile:a})]})]})},S=function(e){var t=e.selectedImg,c=e.setSelectedImg;return Object(f.jsx)("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&c(null)},children:Object(f.jsx)("img",{src:t,alt:"enlarged pic"})})};var I=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(m,{}),Object(f.jsx)(k,{}),Object(f.jsx)(p,{setSelectedImg:a}),c&&Object(f.jsx)(S,{selectedImg:c,setSelectedImg:a})]})};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(I,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.75947b70.chunk.js.map